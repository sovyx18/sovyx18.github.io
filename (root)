<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>SOVYX</title>
  <style>
    body {
      font-family: 'Helvetica Neue', sans-serif;
      background-color: #fffaf0;
      color: #222;
      padding: 2em;
      line-height: 1.6;
    }
    h1, h2 {
      color: #d60000;
    }
    section {
      margin-bottom: 2em;
      padding: 1em;
      background-color: #ffffff;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    input, button {
      padding: 0.5em;
      margin-top: 0.5em;
      font-size: 1em;
      width: 100%;
    }
    #capsulaForm, #respuesta {
      display: none;
    }
    #logo {
      width: 120px;
      margin-bottom: 1em;
    }
    .oculto {
      display: none;
    }
  </style>
</head>
<body>

  <!-- Logo + Branding -->
  <img id="logo" src="logo-sovyx.png" alt="Logo SOVYX" />

  <h1>SOVYX</h1>

  <!-- Registro inicial -->
  <section id="registro">
    <h2>Acceso simbólico</h2>
    <form id="registroForm">
      <input type="text" name="usuario" placeholder="Tu nombre o alias" required />
      <input type="email" name="correo" placeholder="Correo electrónico" required />
      <button type="submit">Activar</button>
    </form>
  </section>

<section id="alcance">
  <h2>Alcance Estratégico por Publicación</h2>
  <ul>
    <li><strong>Alcance definido:</strong> 50.000 personas high ticket</li>
    <li><strong>Cierre simbólico:</strong> 1% = 500 clientes</li>
    <li><strong>Rango por cliente:</strong> €1.000 a €10.000+</li>
    <li><strong>Ingresos estimados:</strong> €500.000 a €5.000.000 por post</li>
  </ul>
  <p><em>Este es un ejemplo si cierras el 1% del alcance por cada reel/post/carrusel que se publique.</em></p>
</section>

  <!-- Formulario predictivo -->
  <section id="formulario">
    <h2>Análisis, Corrección y Simulación</h2>
    <p><em>Este es un ejemplo si cierras el 1% del alcance por cada reel/post/carrusel que se publique.</em></p>
    <form id="capsulaForm">
      <input type="text" name="product" placeholder="Producto" required />
      <input type="number" name="price" placeholder="Precio" required />
      <input type="text" name="niche" placeholder="Nicho" required />
      <input type="text" name="audience" placeholder="Audiencia" required />
      <input type="number" name="goal" placeholder="Meta ($)" required />
      <input type="number" name="days" placeholder="Tiempo (días)" required />
      <button type="submit">Activar</button>
    </form>
  </section>

  <!-- Corrección predictiva -->
  <section id="respuesta"></section>

  <!-- Fundamentos ocultos para el sistema -->
  <div class="oculto" id="fundamentos">
    Emocionalmente inevitable, Financieramente simulable, Documentado en tiempo real, Corrige antes del fallo, Multiplica sin perder esencia, Activa sin vender, Escala sin comunidad, Visualmente icónico, Narrativamente inevitable, Validación pública, Corrección predictiva, Simulación de ingresos.
  </div>

  <!-- Script de detección + POST a Replit -->
  <script>
    // Detección de usuario
    if (localStorage.getItem('sovyx_user')) {
      document.getElementById('registro').style.display = 'none';
      document.getElementById('formulario').style.display = 'block';
      document.getElementById('capsulaForm').style.display = 'block';
    }

    // Registro
    document.getElementById('registroForm').addEventListener('submit', function(e) {
      e.preventDefault();
      localStorage.setItem('sovyx_user', 'true');
      document.getElementById('registro').style.display = 'none';
      document.getElementById('formulario').style.display = 'block';
      document.getElementById('capsulaForm').style.display = 'block';
    });

    // Activación cápsula
    document.getElementById('capsulaForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const form = e.target;
      const data = {
        product: form.product.value,
        price: parseFloat(form.price.value),
        niche: form.niche.value,
        audience: form.audience.value,
        goal: parseFloat(form.goal.value),
        days: parseInt(form.days.value)
      };

      fetch('https://sovyx-predictiva-sophie10fra.replit.app/activate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      })
      .then(res => res.json())
      .then(response => {
        document.getElementById('respuesta').style.display = 'block';
        document.getElementById('respuesta').innerHTML = `
          <h2>Corrección Predictiva</h2>
          <p><strong>Cluster:</strong> ${response.cluster}</p>
          <p><strong>Caption:</strong> ${response.caption}</p>
          <p><strong>Formato:</strong> ${response.estructura.formato}</p>
          <p><strong>CTA:</strong> ${response.estructura.CTA}</p>
        `;
      })
      .catch(error => {
        document.getElementById('respuesta').innerText = 'Error al activar la cápsula.';
        console.error(error);
      });
    });
  </script>

</body>
</html>
